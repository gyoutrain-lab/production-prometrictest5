<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nursing Prometric Actual Simulation Test</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    min-height: 100vh;
    background: #f0f8ff;
    position: relative;
  }

  /* Flowing water background */
  .water-bg {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: url('https://raw.githubusercontent.com/gyoutrain-lab/production-prometrictest5/main/assets/water.jpg') repeat;
    background-size: cover;
    animation: flow 15s linear infinite;
    opacity: 0.2;
    z-index: -1;
  }
  @keyframes flow { 0% { background-position:0 0;} 100% { background-position:1000px 1000px;} }

  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-top: 40px;
  }

  .hero-icon img {
    width: 150px;
    height: auto;
    margin-bottom: 20px;
  }

  .title-container {
    text-align: center;
    margin-bottom: 30px;
    max-width: 800px;
    color: #333;
  }
  .title-container h1 {
    font-size: 2rem;
    font-weight: bold;
    margin: 10px 0;
    text-shadow: 1px 1px 2px #fff;
  }
  .title-container p {
    font-size: 1rem;
    text-shadow: 1px 1px 2px #fff;
  }

  .social {
    display: flex;
    gap: 15px;
    margin-bottom: 30px;
  }
  .social a img {
    width: 40px;
    height: 40px;
    transition: transform 0.2s;
  }
  .social a img:hover { transform: scale(1.2); }

  .reg-form {
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 300px;
    margin-bottom: 20px;
  }
  .reg-form input, .reg-form select, .reg-form button {
    padding: 10px;
    font-size: 1rem;
    border-radius: 6px;
    border: 1px solid #ccc;
  }
  .reg-form button {
    background-color: #007bff;
    color: #fff;
    border: none;
    cursor: pointer;
  }
  .reg-form button:hover { background-color: #0056b3; }

  #startQuiz {
    display: none;
    padding: 10px 20px;
    font-size: 1rem;
    border-radius: 6px;
    border: none;
    background: green;
    color: white;
    cursor: pointer;
  }

  .message {
    text-align: center;
    font-size: 1rem;
    color: green;
    margin-bottom: 20px;
  }

  @media (max-width: 600px) {
    .title-container h1 { font-size: 1.5rem; }
    .title-container p { font-size: 0.9rem; }
    .social a img { width: 35px; height: 35px; }
  }
</style>
</head>
<body>

<div class="water-bg"></div>

<div class="container">

  <!-- Main icon -->
  <div class="hero-icon">
    <img src="https://raw.githubusercontent.com/gyoutrain-lab/production-prometrictest5/main/assets/icon.jpg" alt="icon">
  </div>

  <!-- Title & subtitle -->
  <div class="title-container">
    <h1>Nursing Prometric Actual Simulation Test</h1>
    <p>Based on the Prometric/SMLE Saudi Council and ENCLEX test materials, prepared by Giyono Asfarrasyid, ETK Yogyakarta</p>
  </div>

  <!-- Social icons -->
  <div class="social">
    <a href="tel:+6285399652487"><img src="https://cdn-icons-png.flaticon.com/512/597/597177.png" alt="Phone"></a>
    <a href="https://wa.me/6285399652487"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp"></a>
    <a href="mailto:gyoutrain@gmail.com"><img src="https://cdn-icons-png.flaticon.com/512/732/732200.png" alt="Email"></a>
    <a href="https://web.facebook.com/gyouskill/"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook"></a>
    <a href="https://www.instagram.com/etkyogya"><img src="https://cdn-icons-png.flaticon.com/512/733/733558.png" alt="Instagram"></a>
  </div>

  <!-- Registration form -->
  <div class="reg-form">
    <input type="text" id="name" placeholder="Enter your name">
    <input type="text" id="phone" placeholder="Enter WhatsApp #">
    <input type="text" id="confirmation" placeholder="Confirmation">
    <input type="text" id="unlock" placeholder="Unlock Code">
    <button id="registerBtn">Confirmation</button>
  </div>

  <div class="message" id="message"></div>
  <button id="startQuiz">Load & Start Quiz</button>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyf5bzVheALbRrn16YNe1tHlJOcfcf_oT0W-lZEk69C8t5z3jlei5ASiThtoM2UzpA1SQ/exec";
const QUIZ_URL = API_URL + "?action=questions&mode=DEMO"; // live quiz URL

// Generate random Unlock Code
function generateUnlockCode() {
  return 'UNL-' + Math.floor(10000 + Math.random() * 90000);
}

document.getElementById("registerBtn").addEventListener("click", () => {
  const name = document.getElementById("name").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const confirmation = document.getElementById("confirmation").value.trim();
  const unlockCodeInput = document.getElementById("unlock").value.trim();
  const unlockCode = unlockCodeInput || generateUnlockCode();

  if(!name || !phone){
    document.getElementById("message").textContent = "Name & WhatsApp number are required!";
    return;
  }

  fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({ name, phone, confirmation, unlockCode })
  })
  .then(res => res.json())
  .then(res => {
    if(res.ok){
      document.getElementById("message").textContent = `Registered successfully! Unlock Code: ${unlockCode}`;
      // Notify admin via WhatsApp
      const waMsg = `Payment Confirmed, User Name: ${name}, WA#: ${phone}, Share Proof QR IDR 50k to get Unlock Code`;
      window.open(`https://wa.me/6285399652487?text=${encodeURIComponent(waMsg)}`, "_blank");

      // Hide registration form
      document.querySelector('.reg-form').style.display = 'none';
      // Show start quiz button
      document.getElementById("startQuiz").style.display = 'block';
    } else {
      document.getElementById("message").textContent = res.message;
    }
  })
  .catch(err => {
    document.getElementById("message").textContent = "Error connecting to server!";
    console.error(err);
  });
});

document.getElementById("startQuiz").addEventListener("click", () => {
  window.open(QUIZ_URL, "_blank");
});
</script>

</body>
</html>
